(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{586:function(s,a,t){"use strict";t.r(a);var n=t(3),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("awk是处理文本文件的一个应用程序；依次处理文件的每一行，并读取里面的每一个字段。")]),s._v(" "),a("h2",{attrs:{id:"_1-基本语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-基本语法"}},[s._v("#")]),s._v(" 1. 基本语法")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'动作'")]),s._v(" 文件名\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $1}'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("1.txt是 awk 所要处理的文本文件, 前面单引号内部有一个大括号，里面就是每一行的处理动作 print $0。其中，print是打印命令，$0代表当前行；")]),s._v(" "),a("p",[s._v("awk会根据"),a("strong",[s._v("空格和制表符")]),s._v("，将每一行分成若干字段，依次用$1、$2、$3代表第一个字段、第二个字段、第三个字段等等。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'this is a test'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $3}'")]),s._v("\n\na\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("当然，如果文件分隔符不是空格和制表符，比如：冒号:，那么，可以用-F指定分隔符。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'this:is:a:test'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-F")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("':'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{print $3}'")]),s._v("\n\na\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变量"}},[s._v("#")]),s._v(" 变量")]),s._v(" "),a("p",[s._v("awk中提供了一些内置变量，方便对文本内容进行操作。")]),s._v(" "),a("ol",[a("li",[s._v("可以使用 "),a("code",[s._v("$ + 数字")]),s._v(" 表示第几个字段， $1表示第一个字段， $2 表示第二个字段，以此类推。")]),s._v(" "),a("li",[a("code",[s._v("NF")]),s._v(" 表示当"),a("strong",[s._v("前行")]),s._v("有多少个字段，"),a("code",[s._v("$NF")]),s._v(" 表示最后一个字段，"),a("code",[s._v("$(NF-1)")]),s._v(" 表示倒数第二个字段；")]),s._v(" "),a("li",[a("code",[s._v("NR")]),s._v(" 表示"),a("strong",[s._v("当前")]),s._v("处理的是第几行；")]),s._v(" "),a("li",[s._v("其他常用变量：\n"),a("ul",[a("li",[a("code",[s._v("FS")]),s._v(" 表示"),a("strong",[s._v("输入字段分隔符")]),s._v("，默认为空格和制表符；")]),s._v(" "),a("li",[a("code",[s._v("RS")]),s._v(" 表示"),a("strong",[s._v("输入记录分隔符")]),s._v("，默认为换行符；")]),s._v(" "),a("li",[a("code",[s._v("OFS")]),s._v(" 表示"),a("strong",[s._v("输出字段分隔符")]),s._v("，默认为空格；")]),s._v(" "),a("li",[a("code",[s._v("ORS")]),s._v(" 表示"),a("strong",[s._v("输出记录分隔符")]),s._v("，默认为换行符。")]),s._v(" "),a("li",[a("code",[s._v("FILENAME")]),s._v(" 表示当前输入的文件名。")])])])]),s._v(" "),a("h2",{attrs:{id:"函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#函数"}},[s._v("#")]),s._v(" 函数")]),s._v(" "),a("p",[s._v("awk中内置了一些原始函数，方便对文本内容进行转换。")]),s._v(" "),a("ol",[a("li",[a("code",[s._v("length()")]),s._v(" 表示字符串长度；")]),s._v(" "),a("li",[a("code",[s._v("sub(r,s,t)")]),s._v(" 表示用字符串s替换字符串t中匹配r的部分；")]),s._v(" "),a("li",[a("code",[s._v("tolower(s)")]),s._v(" 表示将字符串s中的所有大写字母转换为小写字母；")]),s._v(" "),a("li",[a("code",[s._v("toupper(s)")]),s._v(" 表示将字符串s中的所有小写字母转换为大写字母；")]),s._v(" "),a("li",[a("code",[s._v("sprintf(format,expr,expr,...)")]),s._v(" 表示按照format的格式化方式，将expr转换为字符串，并返回结果。")]),s._v(" "),a("li",[a("code",[s._v("split(s,array,sep)")]),s._v(" 表示将字符串s按照sep分割，并将结果保存到数组array中。")]),s._v(" "),a("li",[a("code",[s._v("systime()")]),s._v(" 表示返回当前时间的时间戳。")]),s._v(" "),a("li",[a("code",[s._v("rand()")]),s._v(" 表示返回一个随机数。")]),s._v(" "),a("li",[a("code",[s._v("sqrt()")]),s._v(" 表示返回一个数的平方根。")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Built_002din.html#Built_002din",target:"_blank",rel:"noopener noreferrer"}},[s._v("内置函数手册传送门"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"条件语句"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#条件语句"}},[s._v("#")]),s._v(" 条件语句")]),s._v(" "),a("p",[s._v("awk 允许输出符合条件的行；")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'条件 动作'")]),s._v(" 文件名\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$1==\"a\" {print $0}'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-F")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("':'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/usr/ {print $1}'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("strong",[s._v("条件语句需要写在 "),a("code",[s._v("{}")]),s._v(" 外")])]),s._v(" "),a("p",[s._v("if 语句")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-F")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("':'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{if ($1 > \"m\") print $1}'")]),s._v(" demo.txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("if语句需要写在 "),a("code",[s._v("{}")]),s._v(" 内")])]),s._v(" "),a("p",[s._v("打印倒数第三个字段；")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NF > 3 {print NR \")\", $(NF-3) }'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{if(NF > 3) print NR ") " $(NF-3); else print NR ") " "xxx"}\'')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);