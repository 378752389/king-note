(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{545:function(a,s,e){"use strict";e.r(s);var t=e(3),r=Object(t.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"操作命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作命令"}},[a._v("#")]),a._v(" 操作命令")]),a._v(" "),s("h3",{attrs:{id:"查看堆信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看堆信息"}},[a._v("#")]),a._v(" 查看堆信息")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("jmap "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-heap")]),a._v(" pid\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"打印gc信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打印gc信息"}},[a._v("#")]),a._v(" 打印gc信息")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("jstat "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-gc")]),a._v(" pid milsec\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"查看堆内存中对象占用大小排序-前20名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看堆内存中对象占用大小排序-前20名"}},[a._v("#")]),a._v(" 查看堆内存中对象占用大小排序（前20名）")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("jmap "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-histo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("7276")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("head")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n20")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"服务启动堆内存参数调整"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务启动堆内存参数调整"}},[a._v("#")]),a._v(" 服务启动堆内存参数调整")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 堆内存的初始大小")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xms")]),a._v(" \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 堆内存的最大大小")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xmx")]),a._v(" \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 堆内存新生代大小   -Xmx - -Xmn 即为老年代大小")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Xmn")]),a._v(" \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 空闲堆空间的最小百分比, 计算公式为：HeapFreeRatio =(CurrentFreeHeapSize/CurrentTotalHeapSize) * 100; ")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# HeapFreeRatio < MinHeapFreeRatio 则需要进行堆扩容，扩容的时机应该在每次垃圾回收之后。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-MinHeapFreeRatio")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#如果HeapFreeRatio > MaxHeapFreeRatio，则需要进行堆缩容，缩容的时机应该在每次垃圾回收之后。")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-MaxHeapFreeRatio")]),a._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# windows 修改启动参数  catalina.sh")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"JAVA_OPTS=%JAVA_OPTS% -server -Xms5120m -Xmx10240m -XX:MetaspaceSize=512m -XX:CompressedClassSpaceSize=1g"')]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# linux 修改启动参数 catalina.sh")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("JAVA_OPTS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$JAVA_OPTS")]),a._v(' -server -Xms4096m -Xmx6144m -XX:MetaspaceSize=512m -XX:CompressedClassSpaceSize=1g"')]),a._v("\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br"),s("span",{staticClass:"line-number"},[a._v("19")]),s("br"),s("span",{staticClass:"line-number"},[a._v("20")]),s("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);