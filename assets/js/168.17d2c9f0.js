(window.webpackJsonp=window.webpackJsonp||[]).push([[168],{628:function(s,a,e){"use strict";e.r(a);var t=e(3),r=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"kafka启动命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kafka启动命令"}},[s._v("#")]),s._v(" kafka启动命令")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 直接启动 zk")]),s._v("\n./zookeeper-server-start.sh "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/config/zookeeper.properties\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后台运行 zk")]),s._v("\n./zookeeper-server-start.sh "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-daemon")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/config/zookeeper.properties\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 直接启动 kafka")]),s._v("\n./kafka-server-start.sh "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/config/server.properties\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后台运行 kafka")]),s._v("\n./kafka-server-start.sh "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-daemon")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/config/server.properties\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h2",{attrs:{id:"主题相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主题相关"}},[s._v("#")]),s._v(" 主题相关")]),s._v(" "),a("ul",[a("li",[s._v("查看集群中所有主题")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("kafka-topics.sh --bootstrap-server localhost:9092 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--list")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("查看指定主题信息")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("kafka-topics.sh --bootstrap-server localhost:9092 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--describe")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topic")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查询结果：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Topic: test\tTopicId: H4KfDOM7Q3OA10RyRlGysg\tPartitionCount: 3\tReplicationFactor: 1\tConfigs: \n\tTopic: test\tPartition: 0\tLeader: 0\tReplicas: 0\tIsr: 0\n\tTopic: test\tPartition: 1\tLeader: 0\tReplicas: 0\tIsr: 0\n\tTopic: test\tPartition: 2\tLeader: 0\tReplicas: 0\tIsr: 0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[s._v("创建topic")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("kafka-topics.sh --bootstrap-server localhost:9092 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--create")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topic")]),s._v(" topic1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--partitions")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" --replication-factor "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("删除topic")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("kafka-topics.sh "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--zookeeper")]),s._v(" localhost:2181  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--delete")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topic")]),s._v(" topic1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("修改topic")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改topic     修改分区数时，仅能增加分区个数。不能用来修改副本个数。")]),s._v("\nkafka-topics.sh "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--alter")]),s._v(" --bootstrap-server node1:9092,node2:9092,node3:9092 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topic")]),s._v(" topicName "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--partitions")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改 副本个数")]),s._v("\nkafka-topics.sh "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--alter")]),s._v(" --bootstrap-server node1:9092,node2:9092,node3:9092 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topic")]),s._v(" topicName "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--config")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flush.messages")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nkafka-topics.sh "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--alter")]),s._v(" --bootstrap-server node1:9092,node2:9092,node3:9092 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topic")]),s._v(" topicName --delete-config flush.messages\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"消费者组相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#消费者组相关"}},[s._v("#")]),s._v(" 消费者组相关")]),s._v(" "),a("ul",[a("li",[s._v("查看所有消费者组")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("kafka-consumer-groups.sh --bootstrap-server localhost:9092 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--list")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("查看消费者组详情")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("kafka-consumer-groups.sh --bootstrap-server localhost:9092 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--describe")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--group")]),s._v(" c1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查询结果：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("GROUP           TOPIC           PARTITION  CURRENT-OFFSET  LOG-END-OFFSET  LAG             CONSUMER-ID                                        HOST            CLIENT-ID\nc2              asd             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("665")]),s._v("             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("665")]),s._v("             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("               consumer-c2-1-2091869c-6fd2-48f9-a530-f65caf1062d8 /192.168.1.217  consumer-c2-1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("查询所有消费者组详情")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("i")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("./kafka-consumer-groups.sh --bootstrap-server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.6:9092 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--list")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"======================= group: '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(' ========================="')]),s._v("\n  ./kafka-consumer-groups.sh --bootstrap-server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.6:9092 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--group")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v(" --describe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"模拟操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模拟操作"}},[s._v("#")]),s._v(" 模拟操作")]),s._v(" "),a("ul",[a("li",[s._v("模拟生产者")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发送无 key 消息")]),s._v("\nkafka-console-producer.sh --broker-list localhost:9092 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topic")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发送 有 key 消息， 默认以 tab 分割")]),s._v("\nkafka-console-producer.sh --bootstrap-server localhsot:9092 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topic")]),s._v(" topicName "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--property")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("parse.key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("模拟消费者")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定主题从最新消息开始消费")]),s._v("\nkafka-console-consumer.sh --bootstrap-server localhost:9092 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topic")]),s._v(" test1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--group")]),s._v(" c-group-1\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定主题从头开始消费")]),s._v("\nkafka-console-consumer.sh --bootstrap-server localhost:9092 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topic")]),s._v(" test1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--group")]),s._v(" c-group-1 --from-beginning\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"消费者组offset操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#消费者组offset操作"}},[s._v("#")]),s._v(" 消费者组offset操作")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重置偏移为最大值   ， 之前的都不消费")]),s._v("\nkafka-consumer-groups.bat --bootstrap-server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.133:9092  --reset-offsets "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--group")]),s._v(" c1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topic")]),s._v(" asd --to-latest "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--execute")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重置偏移为0")]),s._v("\nkafka-consumer-groups.bat --bootstrap-server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.133:9092  --reset-offsets "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--group")]),s._v(" c1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topic")]),s._v(" asd --to-earliest "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--execute")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重置偏移为 指定偏移值")]),s._v("\nkafka-consumer-groups.bat --bootstrap-server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.133:9092  --reset-offsets "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--group")]),s._v(" c1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topic")]),s._v(" asd --to-offset "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--execute")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重置偏移 到指定时间")]),s._v("\nkafka-consumer-groups.bat --bootstrap-server "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".1.133:9092  --reset-offsets "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--group")]),s._v(" c1 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--topic")]),s._v(" asd --to-datetime "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2022")]),s._v("-12-16T10:22:44.000 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--execute")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#------------------------------------------------------------------------------------------------")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);