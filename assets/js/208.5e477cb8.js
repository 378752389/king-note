(window.webpackJsonp=window.webpackJsonp||[]).push([[208],{666:function(a,s,t){"use strict";t.r(s);var e=t(3),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("面试时总会被问到和高并发相关问题，我们在测试时就需要模拟高并发环境，此时就需要对接口进行压测，压测工具由很多，java中最常见的为jmeter，\n但是我们在开发接口的时候进行jmeter配置会显得有点麻烦，使用 ab 压测会更简单方便。")]),a._v(" "),s("h2",{attrs:{id:"常规接口测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常规接口测试"}},[a._v("#")]),a._v(" 常规接口测试")]),a._v(" "),s("ol",[s("li",[a._v("在进行压测的时候，有时候我们系统会包含限流，熔断，认证拦截等功能，因此我们首选需要确保接口能被正常的请求成功， 通过 -v 2 参数，能看到一次完整的http请求（包括请求和响应）")]),a._v(" "),s("li",[a._v("后端接口通常需要认证，我们可以通过 -H 参数填写请求头信息。")])]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ab "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-H")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhZG1pbklkIjoxLCJyb2xlIjoicm9sZSIsImNyZWF0ZVRpbWUiOjE2OTgxMTc5OTIwNzAsInN1YiI6ImFkbWluIiwiaXNzIjoia2luZy1mb29kLWFkbWluIiwiYXVkIjoia2luZy1mb29kLWFkbWluIiwiZXhwIjoxNjk4MTIwOTkyLCJuYmYiOjE2OTgxMTc5OTJ9.aZRJFS9LjETlMIA6mPwGyzl53itghJ9Kup7tX-J0Mfs"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-H")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Content-Type: application/json"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nhttp://192.168.1.133:8080/resource/tree\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h2",{attrs:{id:"并发接口测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#并发接口测试"}},[a._v("#")]),a._v(" 并发接口测试")]),a._v(" "),s("p",[a._v("进行 常规接口测试，并且能正常的拿到响应体 后， 可以进行 并发接口测试， 通常我们只需要添加2个参数即可；")]),a._v(" "),s("ul",[s("li",[a._v("-c 100： 并发数量；")]),a._v(" "),s("li",[a._v("-n 200： 总请求的数据；")]),a._v(" "),s("li",[a._v("-s 5: 指定每个请求的超时时间，单位为秒；")])]),a._v(" "),s("p",[a._v("上面 2 个参数配合起来就是， 分两波进行请求， 每次并发请求的数量为 100；")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ab "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("200")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-H")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhZG1pbklkIjoxLCJyb2xlIjoicm9sZSIsImNyZWF0ZVRpbWUiOjE2OTgxMTc5OTIwNzAsInN1YiI6ImFkbWluIiwiaXNzIjoia2luZy1mb29kLWFkbWluIiwiYXVkIjoia2luZy1mb29kLWFkbWluIiwiZXhwIjoxNjk4MTIwOTkyLCJuYmYiOjE2OTgxMTc5OTJ9.aZRJFS9LjETlMIA6mPwGyzl53itghJ9Kup7tX-J0Mfs"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-H")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Content-Type: application/json"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nhttp://192.168.1.133:8080/resource/tree\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("h2",{attrs:{id:"带参接口测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#带参接口测试"}},[a._v("#")]),a._v(" 带参接口测试")]),a._v(" "),s("p",[a._v("有时候，我们在进行并发写请求测试，需要填写请求体参数；此时我们需要新建一个文件（此处为 data.json），内部填写数据，并且 -T 参数指定请求体的类型")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("ab "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" data.json "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-T")]),a._v(" application/json "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-H")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhZG1pbklkIjoxLCJyb2xlIjoicm9sZSIsImNyZWF0ZVRpbWUiOjE2OTgxMTc5OTIwNzAsInN1YiI6ImFkbWluIiwiaXNzIjoia2luZy1mb29kLWFkbWluIiwiYXVkIjoia2luZy1mb29kLWFkbWluIiwiZXhwIjoxNjk4MTIwOTkyLCJuYmYiOjE2OTgxMTc5OTJ9.aZRJFS9LjETlMIA6mPwGyzl53itghJ9Kup7tX-J0Mfs"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nhttp://192.168.1.133:8080/resource/tree\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);