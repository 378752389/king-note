(window.webpackJsonp=window.webpackJsonp||[]).push([[206],{673:function(s,n,a){"use strict";a.r(n);var t=a(3),e=Object(t.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"sentinel中关于限流的核心算法-滑动时间窗口算法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sentinel中关于限流的核心算法-滑动时间窗口算法"}},[s._v("#")]),s._v(" sentinel中关于限流的核心算法 - 滑动时间窗口算法")]),s._v(" "),n("p",[s._v("sentinel中对于流量流入时，需要从当前开始，统计过去 一个时间窗口内 的流量，然后用 过去时间窗口流量之和加上当前流量 是否\n超过阈值，超过则需要限流处理；")]),s._v(" "),n("p",[s._v("算法实现：将流量按时间进行分段，每段记录该段时间总流量；并且时间窗口 >> 时间段（假设时间窗口为 60t， 每个时间段就是 1t）\n当请求过来时， 记录流量流入时间，然后 向过去 滑动一个 时间窗口，我们统计时，只需 统计被时间窗口包裹的\n分段流量之和即可；")]),s._v(" "),n("h2",{attrs:{id:"限流"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#限流"}},[s._v("#")]),s._v(" 限流")]),s._v(" "),n("p",[s._v("作用对象：主要针对提供方进行配置；")]),s._v(" "),n("p",[s._v("核心概念：")]),s._v(" "),n("ul",[n("li",[s._v("限流策略：qps/线程数")]),s._v(" "),n("li",[s._v("流控效果：快速失败/热启动（预热时间）/排队等待（超时时间）")])]),s._v(" "),n("h2",{attrs:{id:"熔断降级"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#熔断降级"}},[s._v("#")]),s._v(" 熔断降级")]),s._v(" "),n("p",[s._v("作用对象：主要是针对调用方进行配置；")]),s._v(" "),n("p",[s._v("背景：现在很多企业架构都是分布式的，在这种背景下，不同服务之间的调用复杂，某一接口出现不稳定，将可能导致整条链路出现问题，最终整条链路都不可用；\n因此我们需要对不稳定的弱依赖服务进行降级。")]),s._v(" "),n("p",[s._v("核心概念：")]),s._v(" "),n("ul",[n("li",[s._v("熔断策略：慢调用比例/异常比例/异常数；")]),s._v(" "),n("li",[s._v("最小调用数： 统计窗口最小包含的调用数才会进行熔断；")]),s._v(" "),n("li",[s._v("统计窗口：在 该时间段窗口下 异常数/慢调用比例/异常比例 是否超过 熔断策略指定的阈值； 超过则进行熔断；")]),s._v(" "),n("li",[s._v("熔断窗口：熔断后，该时间窗口内不允许有请求通过；")])]),s._v(" "),n("h2",{attrs:{id:"nginx-临时关闭解耦"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx-临时关闭解耦"}},[s._v("#")]),s._v(" nginx 临时关闭解耦")]),s._v(" "),n("h3",{attrs:{id:"关闭某个接口-并返回403"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关闭某个接口-并返回403"}},[s._v("#")]),s._v(" 关闭某个接口，并返回403")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("location /api/user/info {\n    \n    # if ($request_method !~* GET|POST|PUT|DELETE) {\n    #      return 403;\n    # }\n    \n    # 对于 restful 风格请求； 如果是get请求则禁用， 其他请求则放行\n    if ($request_method ~* GET) {\n         return 403;\n    }\n    \n    proxy_pass http://localhost:8080;\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("h3",{attrs:{id:"关闭某个接口-并返回json字符串"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关闭某个接口-并返回json字符串"}},[s._v("#")]),s._v(" 关闭某个接口，并返回json字符串")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\nlocation /api/user/info {\n    root html;\n    index result.json;\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);