---
title: Nginx-常见状态码处理
date: 2024-03-30
categories:
  - 中间件
tags:
  - nginx
---

## 502（网关错误）

原因：通常是nginx不能连接到后台服务器；当出现这个状态码时，大部分情况基本可以判断是后台服务挂了。

## 504（网关超时）

原因：nginx 对读取上游服务器响应做了超时限制，当 nginx 在指定时间内未读取到上游服务器的响应就会报网关超时错误。这个限制参数由 `proxy_read_timeout` 配置，默认时间为 60s。

场景：公司做大批量数据更新时，服务器需要大量时间处理，由于程序设置不当、或者操作不可避免，确实需要超大数据量更新，导致线程阻塞，nginx 在超过指定时间后，由于未读取到消息，认为服务器异常，会主动断开连接，并报错。 



