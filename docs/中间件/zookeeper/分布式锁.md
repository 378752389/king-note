---
title: Zookeeper-分布式锁实现
date: 2023-03-14
categories:
  - 中间件
tags:
  - zookeeper
---

## Zk分布式锁原理

zk的顺序节点，每次创建时都会分配一个序列号，这个序列号在父节点下唯一，并且递增；由于节点的有序性，zk天然就是一个公平锁。

> 创建锁时，父节点建议创建持久化节点，而子节点（加锁对象节点）建议创建临时顺序节点

原理：每当进行加锁操作时，都在指定路径下创建临时顺序节点，然后判断自己的排号是不是最小的，如果是，则获取锁。否则就处于等待通知状态，又由于zk节点的监听机制，


