## 加密算法

### 对称加密算法

对称加密算法使用一个密钥；

给定一个明文和一个密钥，加密产生密文。解密时使用的读密钥和 加密密钥一致；

常见的对称加密算法：

* 电子密码本 Electronic Code Book(ECB)

  将加密的数据分成若干组，每组的大小跟加密密钥长度相同，然后每组都用相同的密钥进行加密。

* 加密块链模式 Cipher Block Chaining(CBC)

  CBC模式的加密首先也是将明文分成固定长度的块，然后将前面一个加密块输出的密文与下一个要加密的明文块进行异或操作，将计算结果再用密钥进行加密得到密文。第一明文块加密的时候，因为前面没有加密的密文，所以需要一个初始化向量。

* 加密反馈模式 Cipher Feedback Mode(CFB)

    * 使用64位的初始化向量。初始化向量放在移位寄存器中，在第一步加密，产生相应的64位初始化密文；
    * 始化向量最左边的8位与明文前8位(假设为a)进行异或运算，产生密文第一部分（假设为c），然后将c传输到接收方；
    * 向量的位（即初始化向量所在的移位寄存器内容）左移8位，使移位寄存器最右边的8位为不可预测的数据，在其中填入c的内容；
    * 第1-3步，直到加密所有的明文单元。

* 输出反馈模式 Output Feedback Mode(OFB)

    * 使用64位的初始化向量。初始化向量放在移位寄存器中，在第一步加密，产生相应的64位初始化密文；
    * 始化向量最左边的8位与明文前8位(假设为a)进行异或运算，产生密文第一部分（假设为c），然后将c传输到接收方；
    * 向量的位（即初始化向量所在的移位寄存器内容）左移8位，使移位寄存器最右边的8位为不可预测的数据，在其中填入a的内容；
    * 第1-3步，直到加密所有的明文单元。

### 摘要算法

无论用户输入什么长度的原始数据，经过计算后输出的密文都是固定长度的

常用的摘要算法 常用的摘要算法主要有MD5和SHA1。D5的输出结果为16字节，sha1的输出结果为20字节。

### 公钥算法

加密和解密使用的是不同的密钥，用其中任一个密钥加密的信息只能用另一个密钥进行解密。这使得通信双方无需事先交换密钥就可进行保密通信。

常见的公钥算法： RSA、DSA、DH和ECC。

1. RSA算法

其算法如下：

A. 选择两质数p、q

B. 计算n = p * q

C. 计算n的欧拉函数Φ(n) = (p - 1)(q - 1)

D. 选择整数e，使e与Φ(n)互质，且1 < e < Φ(n)

E. 计算d，使d * e = 1 mod Φ(n)

其中，公钥KU＝{e, n}，私钥KR={d, n}。

加密/解密过程：

利用RSA加密，首先需将明文数字化，取长度小于log2n位的数字作为明文块。

对于明文块M和密文块C，加/解密的形式如下：

加密： C = Me mod n

解密： M = Cd mod n = (Me)d mod n = Med mod n

RSA的安全性基于大数分解质因子的困难性。因为若n被分解为n = p * q，则Φ(n)、e、d可依次求得。目前，因式分解速度最快的方法的时间复杂性为exp(sqrt(ln(n)lnln(n)))。统计数据表明，在重要应用中，使用512位的密钥已不安全，需要采用1024位的密钥。

::: tips 互质： 公约数只有1的两个整数，叫做互质整数
:::

2. DSA算法 Digital Signature Algorithm

   只能用于数字签名，不能用于数字加密


3. DH 算法 Diffie-Hellman密钥交换 
   
    通信双方进行密钥协定的协议：两个实体中的任何一个使用自己的私钥和另一实体的公钥，得到一个对称密钥，这一对称密钥其它实体都计算不出来。

    DH算法的安全性基于有限域上计算离散对数的困难性。 至少需要1024位，才能保证有足够的中、长期安全。

4. ECC算法 椭圆曲线密码体制

   ECC算法的安全性基于椭圆曲线点群上的离散对数问题的难解性。




## 专业名词
* PEM(Privacy-Enhanced Mail): 用来存储证书或者密钥的
* PKCS7 (Public-Key Cryptography Standards)： 主要用来存储私钥，证书。 可以用der格式或pem格式存储； .pem or .p7b
* PKCS8: 主要用来存储私钥。 首先进行 PKCS5 进行加密， 然后进行base64编码，转换为PEM格式存储
* PKCS12: 可以看做是 PKCS7 的扩展，在 PKCS12 中可以存储证书，私钥或者 CRL。 .p12 or .pfx


> 参考
> 
> https://www.openssl.net.cn/